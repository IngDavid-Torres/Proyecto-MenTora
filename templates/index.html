<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.SITE_NAME }} - Gamifica tu Aprendizaje</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #0a0e27;
            --secondary-color: #1a237e;
            --accent-color: #00e5ff;
            --neon-blue: #00bcd4;
            --neon-purple: #9c27b0;
            --space-dark: #0d1421;
            --cosmic-purple: #3f51b5;
            --stellar-orange: #ff6f00;
            --galaxy-pink: #e91e63;
            --text-primary: #ffffff;
            --text-secondary: #b0bec5;
            --bg-primary: #0a0e27;
            --bg-secondary: #1a237e;
            --shadow-color: rgba(0, 229, 255, 0.3);
            --border-radius: 15px;
            --glass-effect: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', 'Poppins', sans-serif;
            background: radial-gradient(ellipse at bottom, #0d1421 0%, #0a0e27 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Estrellas animadas de fondo */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, white, transparent),
                radial-gradient(2px 2px at 40px 70px, white, transparent),
                radial-gradient(1px 1px at 90px 40px, white, transparent),
                radial-gradient(1px 1px at 130px 80px, white, transparent),
                radial-gradient(2px 2px at 160px 30px, white, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: sparkle 20s linear infinite;
            z-index: -1;
            opacity: 0.5;
        }

        @keyframes sparkle {
            0%, 100% { transform: translateX(0px) translateY(0px); }
            50% { transform: translateX(-10px) translateY(-5px); }
        }

        .navbar {
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 229, 255, 0.3);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 229, 255, 0.2);
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(0, 229, 255, 0.5);
            position: relative;
        }

        .logo::after {
            content: 'üöÄ';
            position: absolute;
            right: -30px;
            top: 0;
            font-size: 0.8em;
            animation: rocket 2s ease-in-out infinite alternate;
        }

        @keyframes rocket {
            0% { transform: translateY(0px) rotate(0deg); }
            100% { transform: translateY(-5px) rotate(5deg); }
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 229, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .nav-links a:hover::before {
            left: 100%;
        }

        .nav-links a:hover {
            background: rgba(0, 229, 255, 0.1);
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.4);
            transform: translateY(-2px);
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            color: white;
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.5);
            background: linear-gradient(45deg, var(--neon-blue), var(--accent-color));
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-color);
            border-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.2);
        }

        .btn-secondary:hover {
            background: var(--accent-color);
            color: var(--primary-color);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 0 25px rgba(0, 229, 255, 0.6);
        }

        .hero {
            margin-top: 100px;
            padding: 6rem 2rem;
            text-align: center;
            color: var(--text-primary);
            position: relative;
            background: radial-gradient(ellipse at center, rgba(0, 229, 255, 0.1) 0%, transparent 70%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%2300e5ff" opacity="0.5"><animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/></circle><circle cx="80" cy="30" r="1" fill="%23ff6f00" opacity="0.7"><animate attributeName="opacity" values="0.7;1;0.7" dur="3s" repeatCount="indefinite"/></circle><circle cx="30" cy="70" r="1.5" fill="%239c27b0" opacity="0.6"><animate attributeName="opacity" values="0.6;1;0.6" dur="2.5s" repeatCount="indefinite"/></circle></svg>') center/cover;
            pointer-events: none;
        }

        .hero-content {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 1.5rem;
            line-height: 1.2;
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple), var(--stellar-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0, 229, 255, 0.5);
            animation: textGlow 3s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            0% { filter: brightness(1); }
            100% { filter: brightness(1.2); }
        }

        .hero h1::after {
            content: 'üåå';
            display: block;
            font-size: 2rem;
            margin-top: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .hero p {
            font-size: 1.4rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .hero-buttons {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .features {
            padding: 5rem 2rem;
            background: rgba(26, 35, 126, 0.3);
            position: relative;
            backdrop-filter: blur(10px);
        }

        .features::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.05) 0%, rgba(156, 39, 176, 0.05) 100%);
            pointer-events: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .section-title {
            text-align: center;
            font-size: 2.8rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 3rem;
            color: var(--text-primary);
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2.5rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 229, 255, 0.3);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 229, 255, 0.1) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.5s ease;
        }

        .feature-card:hover::before {
            transform: scale(1);
        }

        .feature-card:hover {
            transform: translateY(-15px);
            border-color: var(--accent-color);
            box-shadow: 0 20px 40px rgba(0, 229, 255, 0.3);
        }

        .feature-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            display: block;
            position: relative;
            z-index: 2;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            position: relative;
            z-index: 2;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.6;
            position: relative;
            z-index: 2;
        }

        .stats {
            padding: 5rem 2rem;
            background: linear-gradient(135deg, var(--space-dark) 0%, var(--primary-color) 100%);
            color: var(--text-primary);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><polygon points="10,10 15,25 30,25 18,35 23,50 10,40 -3,50 2,35 -10,25 5,25" fill="%2300e5ff" opacity="0.3"><animateTransform attributeName="transform" type="rotate" values="0 10 30;360 10 30" dur="20s" repeatCount="indefinite"/></polygon><polygon points="150,60 155,75 170,75 158,85 163,100 150,90 137,100 142,85 130,75 145,75" fill="%23ff6f00" opacity="0.4"><animateTransform attributeName="transform" type="rotate" values="0 150 80;360 150 80" dur="15s" repeatCount="indefinite"/></polygon></svg>') center/cover;
            animation: cosmic-drift 30s linear infinite;
        }

        @keyframes cosmic-drift {
            0% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(-20px) translateY(-10px); }
            100% { transform: translateX(0) translateY(0); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 3rem;
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .stat-item {
            padding: 2rem;
            background: rgba(0, 229, 255, 0.1);
            border: 1px solid rgba(0, 229, 255, 0.3);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.5);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 20px rgba(0, 229, 255, 0.6);
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
            color: var(--text-secondary);
        }

        .footer {
            background: var(--space-dark);
            color: var(--text-primary);
            padding: 3rem 2rem 2rem;
            text-align: center;
            border-top: 1px solid rgba(0, 229, 255, 0.3);
        }

        /* Chatbot Styles - Tema Tecnonauta */
        .chatbot-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            border: 2px solid rgba(0, 229, 255, 0.5);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.5);
        }

        .chatbot-toggle:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 40px rgba(0, 229, 255, 0.8);
        }

        .notification-dot {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 22px;
            height: 22px;
            background: var(--stellar-orange);
            border: 3px solid var(--primary-color);
            border-radius: 50%;
            display: none;
            animation: cosmic-pulse 2s infinite;
        }

        @keyframes cosmic-pulse {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 111, 0, 0.5); }
            50% { transform: scale(1.2); box-shadow: 0 0 20px rgba(255, 111, 0, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 111, 0, 0.5); }
        }

        .chatbot-box {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 420px;
            height: 650px;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 229, 255, 0.3);
            border-radius: var(--border-radius);
            box-shadow: 0 0 50px rgba(0, 229, 255, 0.3);
            display: none;
            flex-direction: column;
            z-index: 1001;
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            color: white;
            padding: 1.2rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-family: 'Orbitron', sans-serif;
            border-bottom: 1px solid rgba(0, 229, 255, 0.3);
        }

        .chatbot-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chatbot-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            cursor: pointer;
            padding: 0.4rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .chatbot-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            max-height: 420px;
            background: rgba(13, 20, 33, 0.8);
        }

        .welcome-message {
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.1) 0%, rgba(156, 39, 176, 0.1) 100%);
            border: 1px solid rgba(0, 229, 255, 0.3);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent-color);
        }

        .welcome-message h3 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            font-family: 'Orbitron', sans-serif;
        }

        .welcome-message p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .quick-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .quick-btn {
            background: linear-gradient(45deg, var(--accent-color), var(--neon-purple));
            color: white;
            border: 1px solid rgba(0, 229, 255, 0.5);
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
        }

        .quick-btn:hover {
            background: linear-gradient(45deg, var(--neon-blue), var(--accent-color));
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.6);
        }

        .user-message, .bot-message {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            align-items: flex-start;
        }

        .user-message {
            justify-content: flex-end;
        }

        .user-avatar, .bot-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
            border: 2px solid rgba(0, 229, 255, 0.3);
        }

        .user-avatar {
            background: linear-gradient(45deg, var(--neon-purple), var(--cosmic-purple));
            color: white;
        }

        .bot-avatar {
            background: linear-gradient(45deg, var(--accent-color), var(--neon-blue));
            color: white;
        }

        .message-bubble {
            max-width: 250px;
            padding: 0.75rem 1rem;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
            font-size: 0.9rem;
            border: 1px solid rgba(0, 229, 255, 0.2);
        }

        .user-bubble {
            background: linear-gradient(45deg, var(--neon-purple), var(--cosmic-purple));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .bot-bubble {
            background: rgba(0, 229, 255, 0.1);
            color: var(--text-primary);
            border-bottom-left-radius: 6px;
            backdrop-filter: blur(10px);
        }

        .quick-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-btn:hover {
            background: var(--primary-color);
            transform: translateY(-1px);
        }

        .user-message, .bot-message {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            align-items: flex-start;
        }

        .user-message {
            justify-content: flex-end;
        }

        .user-avatar, .bot-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .user-avatar {
            background: var(--primary-color);
            color: white;
        }

        .bot-avatar {
            background: var(--accent-color);
            color: white;
        }

        .message-bubble {
            max-width: 250px;
            padding: 0.75rem 1rem;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
            font-size: 0.9rem;
        }

        .user-bubble {
            background: var(--primary-color);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .bot-bubble {
            background: rgba(26, 35, 126, 0.8);
            color: var(--text-primary);
            border-bottom-left-radius: 6px;
            border: 1px solid rgba(0, 229, 255, 0.3);
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .typing-dots {
            display: flex;
            gap: 0.2rem;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        .chatbot-input-area {
            padding: 1rem;
            border-top: 1px solid rgba(0, 229, 255, 0.3);
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
            background: rgba(10, 14, 39, 0.8);
        }

        .input-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            background: rgba(26, 35, 126, 0.3);
            border: 1px solid rgba(0, 229, 255, 0.3);
            border-radius: 25px;
            padding: 0.5rem 1rem;
        }

        .chatbot-input {
            flex: 1;
            border: none;
            background: none;
            resize: none;
            outline: none;
            font-family: inherit;
            font-size: 0.9rem;
            max-height: 80px;
            color: var(--text-primary);
        }

        .emoji-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 0.5rem;
            padding: 0.2rem;
        }

        .send-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .send-btn:hover:not(:disabled) {
            background: var(--primary-color);
            transform: scale(1.1);
        }

        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chatbot-box {
                width: calc(100vw - 20px);
                height: calc(100vh - 40px);
                bottom: 10px;
                right: 10px;
                left: 10px;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .navbar {
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero-buttons {
                flex-direction: column;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animaciones tecnonauta adicionales */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Efectos hover para las features */
        .feature:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.15);
            border-color: rgba(99, 102, 241, 0.2);
        }
    </style>
</head>

<body>
    <!-- Fondo combinado: engranajes, circuitos, part√≠culas y figuras humanoides -->
    <svg class="gears-bg" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none;opacity:0.13;" viewBox="0 0 1920 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Engranajes -->
        <g>
            <g transform="translate(100,100)">
                <circle cx="0" cy="0" r="50" fill="#00fff1" opacity="0.6">
                    <animateTransform attributeName="transform" type="rotate" dur="8s" repeatCount="indefinite" values="0;360"/>
                </circle>
                <circle cx="0" cy="0" r="40" fill="none" stroke="#fff" stroke-width="2"/>
                <polygon points="-15,-40 15,-40 20,-50 -20,-50" fill="#00c3ff"/>
                <polygon points="-15,40 15,40 20,50 -20,50" fill="#00c3ff"/>
                <polygon points="-40,-15 -40,15 -50,20 -50,-20" fill="#00c3ff"/>
                <polygon points="40,-15 40,15 50,20 50,-20" fill="#00c3ff"/>
            </g>
            <g transform="translate(300,200)">
                <circle cx="0" cy="0" r="30" fill="#9c27b0" opacity="0.7">
                    <animateTransform attributeName="transform" type="rotate" dur="6s" repeatCount="indefinite" values="360;0"/>
                </circle>
                <circle cx="0" cy="0" r="20" fill="none" stroke="#fff" stroke-width="1"/>
                <polygon points="-10,-25 10,-25 12,-30 -12,-30" fill="#00fff1"/>
                <polygon points="-10,25 10,25 12,30 -12,30" fill="#00fff1"/>
                <polygon points="-25,-10 -25,10 -30,12 -30,-12" fill="#00fff1"/>
                <polygon points="25,-10 25,10 30,12 30,-12" fill="#00fff1"/>
            </g>
            <g transform="translate(1600,300)">
                <circle cx="0" cy="0" r="70" fill="#ff6f00" opacity="0.5">
                    <animateTransform attributeName="transform" type="rotate" dur="10s" repeatCount="indefinite" values="0;360"/>
                </circle>
                <circle cx="0" cy="0" r="55" fill="none" stroke="#fff" stroke-width="3"/>
                <polygon points="-20,-55 20,-55 25,-70 -25,-70" fill="#00c3ff"/>
                <polygon points="-20,55 20,55 25,70 -25,70" fill="#00c3ff"/>
                <polygon points="-55,-20 -55,20 -70,25 -70,-25" fill="#00c3ff"/>
                <polygon points="55,-20 55,20 70,25 70,-25" fill="#00c3ff"/>
            </g>
        </g>
        <!-- Circuitos animados -->
        <g stroke="#ffe066" stroke-width="2">
            <path d="M0,400 Q200,300 400,400 T800,400" fill="none" opacity="0.4">
                <animate attributeName="stroke-dasharray" dur="3s" repeatCount="indefinite" values="0,1000;1000,0"/>
            </path>
            <path d="M500,200 L700,200 L700,400 L900,400" fill="none" opacity="0.3">
                <animate attributeName="stroke-dasharray" dur="4s" repeatCount="indefinite" values="0,800;800,0"/>
            </path>
            <path d="M1200,100 Q1400,200 1600,100" fill="none" opacity="0.5">
                <animate attributeName="stroke-dasharray" dur="2.5s" repeatCount="indefinite" values="0,600;600,0"/>
            </path>
        </g>
    </svg>

    <!-- Navbar -->
    <nav style="display: flex; justify-content: space-between; align-items: center; padding: 1.2rem 2rem; background: rgba(26,33,62,0.85); border-bottom: 2px solid #00fff1; box-shadow: 0 4px 32px rgba(0,255,241,0.08); font-family: 'Orbitron', 'Poppins', Arial, sans-serif; letter-spacing: 2px; position: relative; z-index: 100;">
        <div style="display: flex; align-items: center; gap: 0.7rem;">
            <h1 style="font-size: 2.1rem; margin: 0; color: #00fff1; text-shadow: 0 0 8px #00fff1, 0 0 2px #fff;">MenTora üöÄ</h1>
        </div>
        <div>
            <a href="{{ url_for('login') }}" style="text-decoration: none; color: #fff; margin-left: 1.2rem; font-weight: bold; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; letter-spacing: 1px; transition: color 0.2s, text-shadow 0.2s;" onmouseover="this.style.color='#00fff1'; this.style.textShadow='0 0 8px #00fff1';" onmouseout="this.style.color='#fff'; this.style.textShadow='';">Iniciar Sesi√≥n</a>
            <a href="{{ url_for('register') }}" style="text-decoration: none; color: #fff; margin-left: 1.2rem; font-weight: bold; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; letter-spacing: 1px; transition: color 0.2s, text-shadow 0.2s;" onmouseover="this.style.color='#00fff1'; this.style.textShadow='0 0 8px #00fff1';" onmouseout="this.style.color='#fff'; this.style.textShadow='';">Registrarse</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" style="text-align: center; padding: 2rem 2rem 2rem 2rem; animation: fadeIn 1.2s; position: relative;">
        <h2 style="font-size: 3.6rem; margin-bottom: 1.2rem; color: #ffffffff; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; text-shadow: 0 0 16px #767777ff, 0 0 2px #fff; letter-spacing: 1px;">ACTIVA TU MENTE</h2>
        <p style="font-size: 1.35rem; max-width: 650px; margin: 0 auto; color: #e0e7ef; text-shadow: 0 0 4px #00fff1;">Explora, compite y conquista desaf√≠os mientras te diviertes. ¬°Cada partida te hace m√°s sabio y cada logro, m√°s legendario!</p>
        <div class="cta-buttons" style="margin-top: 2.5rem;">
            <a href="{{ url_for('register') }}" style="text-decoration: none; background: linear-gradient(90deg, #ffffffff 60%, #00c3ff 100%); color: #1a1a2e; padding: 1rem 2.5rem; border-radius: 40px; font-weight: bold; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; margin: 0 0.7rem; font-size: 1.15rem; box-shadow: 0 2px 18px #00fff1a0; letter-spacing: 1px; border: none; transition: background 0.2s, color 0.2s, transform 0.15s, box-shadow 0.2s; display: inline-block;" onmouseover="this.style.background='linear-gradient(90deg, #00c3ff 60%, #00fff1 100%)'; this.style.color='#fff'; this.style.transform='scale(1.08)'; this.style.boxShadow='0 4px 32px #00fff1cc';" onmouseout="this.style.background='linear-gradient(90deg, #ffffffff 60%, #00c3ff 100%)'; this.style.color='#1a1a2e'; this.style.transform='scale(1)'; this.style.boxShadow='0 2px 18px #00fff1a0';">
                üöÄ Comenzar Gratis
            </a>
            <a href="#caracteristicas" style="text-decoration: none; background: linear-gradient(90deg, #ffffffff 60%, #00c3ff 100%); color: #1a1a2e; padding: 1rem 2.5rem; border-radius: 40px; font-weight: bold; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; margin: 0 0.7rem; font-size: 1.15rem; box-shadow: 0 2px 18px #00fff1a0; letter-spacing: 1px; border: none; transition: background 0.2s, color 0.2s, transform 0.15s, box-shadow 0.2s; display: inline-block;" onmouseover="this.style.background='linear-gradient(90deg, #00c3ff 60%, #00fff1 100%)'; this.style.color='#fff'; this.style.transform='scale(1.08)'; this.style.boxShadow='0 4px 32px #00fff1cc';" onmouseout="this.style.background='linear-gradient(90deg, #ffffffff 60%, #00c3ff 100%)'; this.style.color='#1a1a2e'; this.style.transform='scale(1)'; this.style.boxShadow='0 2px 18px #00fff1a0';">
                ‚ÑπÔ∏è Saber M√°s
            </a>
        </div>

        <div style="display: flex; justify-content: center; align-items: center; padding: 3rem 0;">
            <img src="/static/img/mentora.png" alt="Logo MenTora" style="height: 200px; width: 280px; animation: float 3s ease-in-out infinite;" onerror="this.style.display='none';">
        </div>
    </section>

    <!-- Features -->
    <section class="features" id="caracteristicas">
        <div class="container">
            <h2 class="section-title">¬øPor qu√© elegir {{ config.SITE_NAME }}?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéÆ</div>
                    <h3>Gamificaci√≥n Avanzada</h3>
                    <p>Sistema de puntos, niveles y logros que convierte el aprendizaje en una experiencia emocionante y motivadora.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ÔøΩ</div>
                    <h3>Biblioteca Digital</h3>
                    <p>Acceso a recursos educativos de alta calidad en programaci√≥n, matem√°ticas, ciencias y m√°s √°reas del conocimiento.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üèÜ</div>
                    <h3>Rankings Competitivos</h3>
                    <p>Compite con estudiantes de todo el mundo y sube en los rankings mientras demuestras tus habilidades.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üí¨</div>
                    <h3>Chat en Tiempo Real</h3>
                    <p>Conecta con otros estudiantes, resuelve dudas y forma grupos de estudio en nuestra comunidad activa.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>IA Integrada</h3>
                    <p>Asistente inteligente que genera contenido personalizado y te ayuda en tu proceso de aprendizaje.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Analytics Detallados</h3>
                    <p>Seguimiento completo de tu progreso con estad√≠sticas detalladas para optimizar tu rendimiento acad√©mico.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section class="stats" id="estadisticas">
        <div class="container">
            <h2 class="section-title">√önete a Nuestra Comunidad</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">15,000+</div>
                    <div class="stat-label">Estudiantes Activos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Profesores Registrados</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">50,000+</div>
                    <div class="stat-label">Retos Completados</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">99%</div>
                    <div class="stat-label">Satisfacci√≥n</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer style="text-align: center; padding: 1.2rem; font-size: 1rem; background: rgba(26,33,62,0.85); color: #00fff1; letter-spacing: 1.5px; border-top: 2px solid #00fff1; font-family: 'Orbitron', 'Poppins', Arial, sans-serif; text-shadow: 0 0 8px #00fff1;">
        &copy; 2025 MenTora. Conocimiento que te reta.
    </footer>

    <!-- Chatbot -->
    <button class="chatbot-toggle" id="chatbot-toggle" onclick="toggleChatbot()">
        <i class="fas fa-comments"></i>
        <div class="notification-dot" id="notificationDot"></div>
    </button>

    <div class="chatbot-box" id="chatbot-box">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <i class="fas fa-robot"></i>
                MenToraBot
            </div>
            <div class="chatbot-actions">
                <button class="action-btn" onclick="clearChat()" title="Limpiar chat">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="action-btn" onclick="toggleChatbot()" title="Cerrar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="welcome-message">
                <h3>¬°Hola! Soy MenToraBot ü§ñ</h3>
                <p>Tu asistente personal en {{ config.SITE_NAME }}. Estoy aqu√≠ para ayudarte con cualquier pregunta sobre la plataforma, estudios o funcionalidades.</p>
                <div class="quick-suggestions" id="quickSuggestions">
                    <button class="quick-btn" onclick="sendQuickMessage('¬øC√≥mo funciona?')">¬øC√≥mo funciona?</button>
                    <button class="quick-btn" onclick="sendQuickMessage('¬øQu√© puedo hacer?')">¬øQu√© puedo hacer?</button>
                    <button class="quick-btn" onclick="sendQuickMessage('Consejos de estudio')">Consejos</button>
                    <button class="quick-btn" onclick="sendQuickMessage('Ayuda')">Ayuda</button>
                </div>
            </div>
        </div>
        
        <div class="typing-indicator" id="typing-indicator">
            <div class="bot-avatar">ü§ñ</div>
            <div>
                MenToraBot est√° escribiendo...
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>
        
        <form onsubmit="sendChatbotMessage(event)" class="chatbot-input-area">
            <div class="input-wrapper">
                <textarea 
                    id="chatbot-input" 
                    class="chatbot-input" 
                    placeholder="Escribe tu pregunta..."
                    rows="1"
                    maxlength="500"
                ></textarea>
                <button type="button" class="emoji-btn" onclick="toggleEmojiPicker()" title="A√±adir emoji">
                    üòä
                </button>
            </div>
            <button type="submit" class="send-btn" disabled>
                <i class="fas fa-paper-plane"></i>
            </button>
        </form>
    </div>

    <script>
    // Variables globales del chatbot
    let chatbotOpen = false;
    let isTyping = false;
    let messageCount = 0;

    // Base de conocimiento enriquecida de MenTora
    const botResponses = {
        // === RESPUESTAS PRINCIPALES DE NAVEGACI√ìN ===
        'como funciona': 'üéØ **MenTora es una plataforma educativa gamificada donde los estudiantes aprenden de forma interactiva mediante juegos, retos y logros.**\n\n**¬øC√≥mo funciona?**\n‚Ä¢ **Resolver Retos Intelectuales:** Quiz interactivos en m√∫ltiples categor√≠as (programaci√≥n, matem√°ticas, ciencias, historia, literatura, tecnolog√≠a)\n‚Ä¢ **Sistema de Puntos:** Gana puntos por cada respuesta correcta y avanza en tu nivel\n‚Ä¢ **Rankings Competitivos:** Compite con otros estudiantes y profesores en tiempo real\n‚Ä¢ **Logros y Insignias:** Desbloquea badges especiales por tus logros acad√©micos\n‚Ä¢ **Biblioteca Digital:** Accede a recursos educativos organizados por temas\n‚Ä¢ **Profesores Admin:** Los profesores pueden crear retos personalizados\n\n**"Gamifica tu aprendizaje"** significa que el aprendizaje se vuelve m√°s divertido y motivante a trav√©s de din√°micas de juego, como niveles, puntos, retos y recompensas.\n\n¬°Todo mientras te diviertes aprendiendo! üöÄ',
        
        // === PREGUNTAS ESPEC√çFICAS DE INICIO ===
        'que es mentora': 'üéì **MenTora es una plataforma educativa gamificada donde los estudiantes aprenden de forma interactiva mediante juegos, retos y logros.**\n\nTransformamos el aprendizaje tradicional en una experiencia emocionante donde cada respuesta correcta te acerca m√°s a dominar nuevos conocimientos.\n\nüì± **Caracter√≠sticas principales:**\n‚Ä¢ Optimizada para dispositivos m√≥viles\n‚Ä¢ Acceso gratuito para estudiantes y profesores\n‚Ä¢ Sistema de gamificaci√≥n completo\n‚Ä¢ Interacci√≥n en tiempo real\n‚Ä¢ Biblioteca de recursos educativos\n\n¬øTe gustar√≠a saber c√≥mo registrarte o qu√© puedes hacer en la plataforma?',
        
        'acceso gratuito': 'üí∞ **¬°S√≠! MenTora ofrece acceso completamente gratuito para estudiantes y profesores.**\n\nNo necesitas pagar nada para:\n‚Ä¢ Crear tu cuenta y perfil\n‚Ä¢ Acceder a todos los juegos y retos\n‚Ä¢ Usar la biblioteca de recursos\n‚Ä¢ Participar en rankings\n‚Ä¢ Ganar logros y puntos\n‚Ä¢ Chatear con la comunidad\n\nEn el futuro podr√≠amos agregar funciones avanzadas premium, pero el n√∫cleo de la plataforma siempre ser√° gratuito.\n\n¬°Comienza tu aventura de aprendizaje sin costo alguno! üöÄ',
        
        'movil': 'üì± **¬°Por supuesto! La plataforma est√° completamente optimizada para dispositivos m√≥viles.**\n\nPuedes usar MenTora desde:\n‚Ä¢ üì± Tu smartphone (Android/iOS)\n‚Ä¢ üíª Tu computadora o laptop\n‚Ä¢ üìü Tablet\n‚Ä¢ üñ•Ô∏è Cualquier dispositivo con navegador web\n\n**Ventajas del dise√±o m√≥vil:**\n‚Ä¢ Interfaz responsive que se adapta a tu pantalla\n‚Ä¢ Navegaci√≥n t√°ctil optimizada\n‚Ä¢ Carga r√°pida incluso con conexi√≥n lenta\n‚Ä¢ Todas las funciones disponibles en cualquier dispositivo\n\n¬°Aprende donde quieras, cuando quieras!',
        
        'que puedo hacer': '‚ú® **En MenTora tienes muchas opciones:**\n\nüìö **Secci√≥n "Aprende m√°s":** Biblioteca digital con recursos de:\n‚Ä¢ Python, JavaScript, Java, C++, HTML/CSS\n‚Ä¢ Algoritmos y estructuras de datos\n‚Ä¢ Patrones de dise√±o y APIs REST\n‚Ä¢ Matem√°ticas, f√≠sica, qu√≠mica\n‚Ä¢ Historia, literatura y m√°s\n\nüéÆ **Juegos Educativos:** Retos interactivos creados por profesores\n\nüìä **Tu Dashboard Personal:**\n‚Ä¢ Ver tu progreso y nivel actual\n‚Ä¢ Estad√≠sticas de rendimiento\n‚Ä¢ Historial de actividades\n‚Ä¢ Ranking de l√≠deres\n‚Ä¢ Notificaciones importantes\n\nüèÜ **Sistema de Logros:** Colecciona insignias por tus logros\n\nüí¨ **Chat en Vivo:** Interact√∫a con otros estudiantes en tiempo real',
        
        'consejos estudio': 'üìö **Consejos personalizados para maximizar tu aprendizaje en MenTora:**\n\n‚è∞ **Organizaci√≥n:**\n‚Ä¢ Establece sesiones de estudio de 25-30 minutos (T√©cnica Pomodoro)\n‚Ä¢ Usa la biblioteca de MenTora para repasar antes de los retos\n‚Ä¢ Revisa tu progreso diariamente en el dashboard\n\nüéØ **Estrategia de Juego:**\n‚Ä¢ Empieza con retos b√°sicos para ganar confianza\n‚Ä¢ Enf√≥cate en una categor√≠a a la vez (ej: programaci√≥n)\n‚Ä¢ Participa en retos diarios para mantener racha\n‚Ä¢ Usa el ranking como motivaci√≥n sana\n\nüí° **Para Programaci√≥n:**\n‚Ä¢ Practica con los recursos de Python, JavaScript y Java\n‚Ä¢ Estudia algoritmos antes de intentar retos avanzados\n‚Ä¢ Usa la secci√≥n de patrones de dise√±o\n\nü§ù **Comunidad:**\n‚Ä¢ Participa en el chat en vivo para resolver dudas\n‚Ä¢ Compite sanamente con compa√±eros\n‚Ä¢ Comparte tus logros para mantener motivaci√≥n',
        
        'registro': 'üìù **¬øC√≥mo registrarse en MenTora?**\n\n**Opci√≥n 1:** Haz clic en el bot√≥n **"Comenzar Gratis"** üöÄ en la p√°gina principal\n**Opci√≥n 2:** Usa el bot√≥n **"Registrarse"** en la esquina superior derecha\n\n**üìã Proceso de registro:**\n**Paso 1:** Completa tus datos b√°sicos:\n‚Ä¢ Nombre de usuario √∫nico\n‚Ä¢ Email v√°lido (recibir√°s confirmaci√≥n)\n‚Ä¢ Contrase√±a segura (m√≠n. 8 caracteres)\n\n**Paso 2:** Elige tu rol:\n‚Ä¢ üéì **Estudiante** - Acceso a juegos, retos y biblioteca\n‚Ä¢ üë®‚Äçüè´ **Profesor** - Panel administrativo + funciones de estudiante\n\n**Paso 3:** Personaliza tu perfil y avatar\n\n**‚úÖ Al completar el registro tendr√°s acceso inmediato a:**\n‚Ä¢ Dashboard personal con estad√≠sticas\n‚Ä¢ Biblioteca de recursos educativos\n‚Ä¢ Primer reto de bienvenida\n‚Ä¢ Sistema de puntos iniciado en 0\n‚Ä¢ Chat en vivo con la comunidad\n\n**¬°Es completamente gratis y toma menos de 2 minutos!** ‚ö°',
        
        'login': 'üîê **Proceso de inicio de sesi√≥n:**\n\n1. **Clic en "Iniciar Sesi√≥n"** (navbar superior derecho)\n2. **Ingresa credenciales:** Usuario y contrase√±a\n3. **¬°Bienvenido a tu dashboard!** Donde ver√°s:\n\nüìä **Panel Principal:**\n‚Ä¢ Puntos actuales y nivel\n‚Ä¢ Progreso hacia siguiente nivel\n‚Ä¢ Logros desbloqueados recientes\n‚Ä¢ Ranking actual entre usuarios\n\nüéØ **Reto Especial del D√≠a:** Desaf√≠o diario con puntos extra\n\nüîî **Notificaciones:** Mensajes importantes del sistema\n\nüìú **Historial:** Tus actividades recientes\n\n**¬øOlvidaste tu contrase√±a?** Usa la opci√≥n de recuperaci√≥n en la p√°gina de login',
        
        // === RESPUESTAS ESPECIALIZADAS POR √ÅREA ===
        'programacion': 'üíª **Secci√≥n de Programaci√≥n en MenTora:**\n\nüìö **Biblioteca de Recursos (12 recursos disponibles):**\n‚Ä¢ **Python para Principiantes:** Variables, funciones, bucles, estructuras de datos\n‚Ä¢ **JavaScript ES6+ Moderno:** Arrow functions, async/await, destructuring\n‚Ä¢ **Java Fundamentos:** POO, herencia, polimorfismo, interfaces\n‚Ä¢ **C++ Avanzado:** Punteros, memoria din√°mica, templates, STL\n‚Ä¢ **Algoritmos y Estructuras de Datos:** Arrays, listas, pilas, √°rboles\n‚Ä¢ **HTML5 y CSS3:** Responsive design, flexbox, grid\n‚Ä¢ **React.js:** Componentes, hooks, contexto\n‚Ä¢ **APIs REST y Flask:** Desarrollo de servicios web\n‚Ä¢ **Git y Control de Versiones:** Branching, merging, GitHub\n‚Ä¢ **Patrones de Dise√±o:** Singleton, Factory, Observer\n‚Ä¢ **Testing y Depuraci√≥n:** Unit testing, TDD\n‚Ä¢ **SQL y Bases de Datos:** Consultas, joins, optimizaci√≥n\n\nüéÆ **Retos de Programaci√≥n:**\n‚Ä¢ Preguntas sobre sintaxis y conceptos\n‚Ä¢ An√°lisis de algoritmos y complejidad\n‚Ä¢ Debugging y resoluci√≥n de problemas\n‚Ä¢ Mejores pr√°cticas y patrones',
        
        'matematicas': 'üßÆ **Matem√°ticas en MenTora:**\n\nüìñ **Recursos Disponibles:**\n‚Ä¢ **√Ålgebra Lineal B√°sica:** Vectores, matrices, operaciones\n‚Ä¢ **C√°lculo Diferencial:** L√≠mites, derivadas, aplicaciones\n‚Ä¢ **Estad√≠stica y Probabilidad:** Distribuciones, an√°lisis de datos\n‚Ä¢ **Matem√°ticas Discretas:** L√≥gica, combinatoria, grafos\n‚Ä¢ **Geometr√≠a Anal√≠tica:** Coordenadas, ecuaciones de rectas\n\nüéØ **Tipos de Retos:**\n‚Ä¢ Problemas de c√°lculo paso a paso\n‚Ä¢ Aplicaciones pr√°cticas en programaci√≥n\n‚Ä¢ An√°lisis de algoritmos (Big O)\n‚Ä¢ Probabilidad en ciencias computacionales\n\nüí° **Tips:**\n‚Ä¢ Practica con calculadoras interactivas\n‚Ä¢ Revisa f√≥rmulas antes de los retos\n‚Ä¢ Conecta matem√°ticas con programaci√≥n',
        
        'biblioteca': 'üìö **Biblioteca Digital de MenTora - Tu Centro de Aprendizaje:**\n\nüîç **B√∫squeda Inteligente:**\n‚Ä¢ Busca por tema, tecnolog√≠a o nivel\n‚Ä¢ Filtros por categor√≠a (programaci√≥n, matem√°ticas, etc.)\n‚Ä¢ Sugerencias autom√°ticas\n\nüì± **Categor√≠as Principales:**\n‚Ä¢ **üíª Programaci√≥n (12 recursos):** Desde Python b√°sico hasta patrones avanzados\n‚Ä¢ **üßÆ Matem√°ticas (8 recursos):** √Ålgebra, c√°lculo, estad√≠stica\n‚Ä¢ **üî¨ Ciencias (6 recursos):** F√≠sica, qu√≠mica, biolog√≠a\n‚Ä¢ **üèõÔ∏è Historia (5 recursos):** Mundial, culturas, civilizaciones\n‚Ä¢ **üìñ Literatura (7 recursos):** An√°lisis de obras cl√°sicas\n‚Ä¢ **‚ö° Tecnolog√≠a (9 recursos):** IA, blockchain, tendencias\n\n‚ú® **Caracter√≠sticas:**\n‚Ä¢ Contenido interactivo con ejemplos\n‚Ä¢ Niveles: B√°sico, Intermedio, Avanzado\n‚Ä¢ Tiempo estimado de estudio\n‚Ä¢ Recursos descargables\n‚Ä¢ Actualizaciones constantes',
        
        'dashboard': 'üìä **Tu Dashboard Personal - Centro de Control:**\n\nüéØ **¬øC√≥mo gano puntos en MenTora?**\nGanas puntos completando juegos, retos y quizzes. Tambi√©n puedes recibir puntos extra por participar activamente en actividades especiales.\n\nüÜô **¬øQu√© significa mi nivel?**\nTu nivel refleja tu progreso general en la plataforma. A medida que acumulas puntos, tu nivel aumenta autom√°ticamente.\n\nüèÜ **¬øD√≥nde puedo ver mis logros?**\nTus logros se muestran en la secci√≥n "üèÜ Logros" dentro del dashboard. Cada logro representa un hito importante en tu aprendizaje.\n\n‚ö° **¬øQu√© es el "Reto Especial del D√≠a"?**\nEs una actividad √∫nica disponible por tiempo limitado para ganar puntos y recompensas adicionales. ¬°Renueva cada 24 horas!\n\nü•á **¬øC√≥mo funciona el ranking de l√≠deres?**\nEl ranking muestra a los estudiantes con m√°s puntos y niveles dentro de la plataforma. Es una forma divertida de competir sanamente.\n\nüí¨ **¬øC√≥mo puedo hablar con un profesor?**\nPuedes usar el bot√≥n de chat en vivo para comunicarte con un profesor o soporte t√©cnico en tiempo real.\n\nüë§ **¬øC√≥mo cambio mi avatar o nombre?**\nHaz clic en "Editar Perfil" desde el men√∫ del usuario en la esquina superior derecha.\n\nüîê **¬øQu√© pasa si cierro sesi√≥n?**\nPerder√°s el acceso al panel y deber√°s iniciar sesi√≥n de nuevo para continuar. Tus datos y progreso se guardan autom√°ticamente.',
        
        'juegos': 'üéÆ **Secci√≥n de Juegos y Retos:**\n\nüéØ **Tipos de Contenido:**\n‚Ä¢ **Quiz Interactivos:** Preguntas de opci√≥n m√∫ltiple\n‚Ä¢ **Retos de Programaci√≥n:** Ejercicios de c√≥digo\n‚Ä¢ **Juegos Educativos:** Creados por profesores\n‚Ä¢ **Desaf√≠os Colaborativos:** Trabajo en equipo\n\n‚≠ê **Caracter√≠sticas:**\n‚Ä¢ **Sistema de Puntos:** Gana puntos por respuestas correctas\n‚Ä¢ **Cron√≥metro:** Retos contra tiempo\n‚Ä¢ **M√∫ltiples Intentos:** Practica hasta dominar\n‚Ä¢ **Retroalimentaci√≥n:** Explicaciones de respuestas\n\nüèÖ **Logros Especiales:**\n‚Ä¢ Racha de respuestas correctas\n‚Ä¢ Completar categor√≠as espec√≠ficas\n‚Ä¢ Participaci√≥n en retos diarios\n‚Ä¢ Tiempo r√©cord en resoluci√≥n\n\nüìö **Integraci√≥n con Biblioteca:** Estudia antes de jugar para mejores resultados',
        
        'profesores': 'üë®‚Äçüè´ **Panel del Profesor - Gesti√≥n Educativa Completa:**\n\nüéØ **¬øQu√© puedo hacer desde el panel de profesor?**\nPuedes gestionar tus quizzes, juegos creados y consultar el desempe√±o detallado de tus alumnos en tiempo real.\n\n‚ûï **¬øC√≥mo agrego un nuevo quiz?**\nEn la secci√≥n "Mis Quizzes", usa el bot√≥n "Agregar Quiz" para crear uno nuevo. Incluye preguntas, respuestas y nivel de dificultad.\n\nüìà **¬øD√≥nde veo los resultados de mis alumnos?**\nEn la tabla de "Alumnos inscritos en tu √°rea" podr√°s consultar sus puntajes, correos y progreso individual.\n\n‚úèÔ∏è **¬øPuedo modificar un quiz existente?**\nS√≠, selecciona el quiz que desees editar y usa el bot√≥n de edici√≥n correspondiente. Puedes cambiar preguntas, respuestas y configuraciones.\n\nüè∑Ô∏è **¬øQu√© significa el √°rea del profesor?**\nCada profesor pertenece a un √°rea tem√°tica (por ejemplo, matem√°ticas, tecnolog√≠a o ingl√©s) y solo ve alumnos asociados a esa √°rea espec√≠fica.\n\nüí¨ **¬øPuedo comunicarme con mis alumnos?**\nS√≠, puedes usar el chat integrado o las funciones de comunicaci√≥n dentro del dashboard para contactar estudiantes.\n\nüîê **¬øQu√© pasa si cierro sesi√≥n?**\nTu sesi√≥n se cerrar√° y deber√°s volver a iniciar sesi√≥n con tu cuenta de profesor. Todos tus datos se guardan autom√°ticamente.\n\nüìä **Herramientas adicionales:**\n‚Ä¢ Sistema de logros personalizables\n‚Ä¢ Estad√≠sticas detalladas de rendimiento\n‚Ä¢ Generaci√≥n autom√°tica de contenido con IA\n‚Ä¢ Exportaci√≥n de reportes y ex√°menes',
        
        'ayuda': 'üÜò **Centro de Ayuda MenTora:**\n\nüìû **Soporte T√©cnico:**\n‚Ä¢ **Chat en Vivo:** Habla con otros usuarios en tiempo real\n‚Ä¢ **MenToraBot:** Asistente 24/7 (¬°soy yo!)\n‚Ä¢ **Email Soporte:** Para problemas t√©cnicos complejos\n\n‚ùì **Preguntas Frecuentes:**\n‚Ä¢ ¬øC√≥mo restablecer contrase√±a?\n‚Ä¢ ¬øC√≥mo subir de nivel m√°s r√°pido?\n‚Ä¢ ¬øQu√© hacer si un reto no carga?\n‚Ä¢ ¬øC√≥mo acceder a recursos premium?\n\nüìñ **Gu√≠as de Usuario:**\n‚Ä¢ Tutorial de inicio para nuevos usuarios\n‚Ä¢ Gu√≠a avanzada de la biblioteca\n‚Ä¢ Manual para profesores\n‚Ä¢ Mejores pr√°cticas de estudio\n\nüîß **Reportar Problemas:**\n‚Ä¢ Bugs en la plataforma\n‚Ä¢ Contenido incorrecto\n‚Ä¢ Sugerencias de mejora\n‚Ä¢ Solicitudes de nuevas funciones',
        
        'tecnologia': '‚ö° **Secci√≥n de Tecnolog√≠a Avanzada:**\n\nü§ñ **Inteligencia Artificial:**\n‚Ä¢ Fundamentos de Machine Learning\n‚Ä¢ Redes neuronales b√°sicas\n‚Ä¢ Aplicaciones en la vida cotidiana\n‚Ä¢ √âtica en IA\n\nüîó **Blockchain y Criptomonedas:**\n‚Ä¢ Conceptos b√°sicos de blockchain\n‚Ä¢ Smart contracts\n‚Ä¢ NFTs y aplicaciones\n\n‚òÅÔ∏è **Cloud Computing:**\n‚Ä¢ AWS, Azure, Google Cloud\n‚Ä¢ Servicios en la nube\n‚Ä¢ DevOps y deployment\n\nüì± **Desarrollo M√≥vil:**\n‚Ä¢ React Native\n‚Ä¢ Flutter\n‚Ä¢ Ionic\n‚Ä¢ App Store optimization',

        // === RESPUESTA POR DEFECTO EXPANDIDA ===
        'default': 'ü§î **¬°Excelente pregunta!** Como MenToraBot, el asistente oficial especializado con conocimiento completo de la plataforma, puedo ayudarte con absolutamente todo:\n\n**üèóÔ∏è ARQUITECTURA Y TECNOLOG√çA:**\n‚Ä¢ Detalles t√©cnicos: Flask, SQLAlchemy, Socket.IO, WebSockets\n‚Ä¢ 10+ tablas de base de datos con relaciones complejas\n‚Ä¢ APIs REST completas y endpoints especializados\n‚Ä¢ Sistema de autenticaci√≥n y seguridad avanzado\n‚Ä¢ Integraci√≥n de IA local para generaci√≥n autom√°tica\n\n**üéì SISTEMA EDUCATIVO COMPLETO:**\n‚Ä¢ Quiz interactivos con m√∫ltiples tipos de pregunta\n‚Ä¢ Biblioteca digital: 47+ recursos en 6 categor√≠as principales\n‚Ä¢ Sistema de juegos: programaci√≥n, l√≥gica, colaborativos\n‚Ä¢ Generaci√≥n autom√°tica de ex√°menes exportables\n‚Ä¢ Analytics detallado de rendimiento estudiantil\n\n**üéÆ GAMIFICACI√ìN AVANZADA:**\n‚Ä¢ 100 niveles con progresi√≥n exponencial balanceada\n‚Ä¢ 50+ logros en 6 categor√≠as diferentes\n‚Ä¢ Sistema de puntos con m√∫ltiples fuentes\n‚Ä¢ Rankings globales y por especializaci√≥n\n‚Ä¢ Eventos especiales y competencias estacionales\n\n**üë• GESTI√ìN DE USUARIOS:**\n‚Ä¢ Roles granulares: estudiante/profesor/admin\n‚Ä¢ Perfiles completamente personalizables\n‚Ä¢ Sistema de permisos y moderaci√≥n autom√°tica\n‚Ä¢ Herramientas administrativas completas\n‚Ä¢ Analytics y reportes institucionales\n\n**üí¨ COMUNICACI√ìN EN TIEMPO REAL:**\n‚Ä¢ Chat con WebSockets y moderaci√≥n IA\n‚Ä¢ Sistema de notificaciones inteligente\n‚Ä¢ Mensajes multimedia y formato rico\n‚Ä¢ Grupos de estudio y mentor√≠as\n\n**üîß HERRAMIENTAS PARA PROFESORES:**\n‚Ä¢ Panel administrativo con 15+ funcionalidades\n‚Ä¢ Creaci√≥n de contenido con editor visual\n‚Ä¢ Sistema de logros personalizable\n‚Ä¢ Estad√≠sticas detalladas de estudiantes\n‚Ä¢ Generaci√≥n autom√°tica con IA local\n\n**üöÄ ¬°PREG√öNTAME LO QUE NECESITES!**\nTengo conocimiento exhaustivo de cada l√≠nea de c√≥digo, cada tabla de la base de datos, cada funcionalidad y cada proceso de MenTora. ¬°No hay pregunta demasiado t√©cnica o demasiado espec√≠fica para m√≠!'
    };

    // Funci√≥n para alternar el chatbot
    function toggleChatbot() {
        const box = document.getElementById('chatbot-box');
        const btn = document.getElementById('chatbot-toggle');
        const notificationDot = document.getElementById('notificationDot');
        
        if (!chatbotOpen) {
            box.style.display = 'flex';
            btn.style.display = 'none';
            chatbotOpen = true;
            notificationDot.style.display = 'none';
            
            // Focus en el input
            setTimeout(() => {
                document.getElementById('chatbot-input').focus();
            }, 300);
        } else {
            box.style.display = 'none';
            btn.style.display = 'flex';
            chatbotOpen = false;
        }
    }

    // Funci√≥n para limpiar el chat
    function clearChat() {
        const messages = document.getElementById('chatbot-messages');
        const welcomeMessage = messages.querySelector('.welcome-message');
        messages.innerHTML = '';
        messages.appendChild(welcomeMessage);
        messageCount = 0;
        
        // Mostrar sugerencias nuevamente
        document.getElementById('quickSuggestions').style.display = 'flex';
    }

    // Funci√≥n para enviar mensajes r√°pidos
    function sendQuickMessage(message) {
        document.getElementById('chatbot-input').value = message;
        sendChatbotMessage(new Event('submit'));
    }

    // Funci√≥n principal para enviar mensajes
    async function sendChatbotMessage(e) {
        e.preventDefault();
        
        if (isTyping) return;
        
        const input = document.getElementById('chatbot-input');
        const messages = document.getElementById('chatbot-messages');
        const sendBtn = document.querySelector('.send-btn');
        const userMsg = input.value.trim();
        
        if (!userMsg) return;
        
        // Ocultar sugerencias despu√©s del primer mensaje
        if (messageCount === 0) {
            document.getElementById('quickSuggestions').style.display = 'none';
        }
        
        messageCount++;
        
        // Agregar mensaje del usuario
        addUserMessage(userMsg);
        
        // Limpiar input y deshabilitar bot√≥n
        input.value = '';
        sendBtn.disabled = true;
        
        // Mostrar indicador de escritura
        showTypingIndicator();
        
        // Generar respuesta del bot
        setTimeout(async () => {
            hideTypingIndicator();
            
            // Usar siempre respuesta local para mayor confiabilidad
            console.log('Procesando mensaje:', userMsg);
            const localResponse = getLocalResponse(userMsg);
            console.log('Respuesta generada:', localResponse.substring(0, 100) + '...');
            addBotMessage(localResponse);
            
            sendBtn.disabled = false;
        }, Math.random() * 1000 + 800); // Simular tiempo de respuesta humano
    }

    // Funci√≥n para obtener respuesta local enriquecida
    function getLocalResponse(message) {
        const msg = message.toLowerCase().trim();
        console.log('üîç Analizando mensaje:', msg);
        
        // === RESPUESTAS DIRECTAS SIMPLES ===
        
        // Saludos
        if (msg.includes('hola') || msg.includes('hello') || msg.includes('hey') || msg.includes('buenos')) {
            const hora = new Date().getHours();
            let saludo = 'üëã ¬°Hola!';
            if (hora >= 6 && hora < 12) saludo = 'üåÖ ¬°Buenos d√≠as!';
            else if (hora >= 12 && hora < 18) saludo = '‚òÄÔ∏è ¬°Buenas tardes!';  
            else if (hora >= 18 || hora < 6) saludo = 'üåô ¬°Buenas noches!';
            
            return `${saludo} Soy **MenToraBot**, tu asistente personal en la plataforma.\n\n¬øEn qu√© puedo ayudarte hoy? Puedes preguntarme sobre:\n‚Ä¢ üìö C√≥mo usar la biblioteca de recursos\n‚Ä¢ üéÆ Juegos y retos disponibles\n‚Ä¢ üìä Tu progreso y estad√≠sticas\n‚Ä¢ üíª Recursos de programaci√≥n\n‚Ä¢ üßÆ Materiales de matem√°ticas\n‚Ä¢ üèÜ Sistema de logros y niveles\n‚Ä¢ üí¨ Chat en vivo con la comunidad\n\n¬°Estoy aqu√≠ para hacer tu experiencia en MenTora incre√≠ble!`;
        }
        
        // ¬øQu√© es MenTora?
        if (msg.includes('que es mentora') || msg.includes('que es la plataforma') || msg.includes('explicame mentora')) {
            console.log('‚úÖ Detectado: que es mentora');
            console.log('üìã Respuesta disponible:', botResponses['que es mentora'] ? 'S√ç' : 'NO');
            return botResponses['que es mentora'] || 'Error: Respuesta no encontrada';
        }
        
        // ¬øEs gratis? / Precio
        if (msg.includes('es gratis') || msg.includes('gratis') || msg.includes('pagar') || msg.includes('costo') || msg.includes('precio') || msg.includes('gratuito')) {
            console.log('‚úÖ Detectado: acceso gratuito');
            console.log('üìã Respuesta disponible:', botResponses['acceso gratuito'] ? 'S√ç' : 'NO');
            return botResponses['acceso gratuito'] || 'Error: Respuesta no encontrada';
        }
        
        // ¬øC√≥mo gano puntos?
        if (msg.includes('como gano puntos') || msg.includes('ganar puntos') || msg.includes('conseguir puntos')) {
            console.log('‚úÖ Detectado: como gano puntos');
            console.log('üìã Respuesta dashboard disponible:', botResponses.dashboard ? 'S√ç' : 'NO');
            return botResponses.dashboard || 'Error: Respuesta dashboard no encontrada';
        }
        
        // ¬øC√≥mo funciona?
        if (msg.includes('como funciona') || msg.includes('explicame') || msg.includes('gamifica')) {
            console.log('‚úÖ Detectado: como funciona');
            return botResponses['como funciona'];
        }
        
        // ¬øQu√© puedo hacer?
        if (msg.includes('que puedo hacer') || msg.includes('que hay') || msg.includes('funcionalidades')) {
            console.log('‚úÖ Detectado: que puedo hacer');
            return botResponses['que puedo hacer'];
        }
        
        // M√≥vil / Dispositivos
        if (msg.includes('movil') || msg.includes('telefono') || msg.includes('celular') || msg.includes('dispositivo') || msg.includes('tablet')) {
            console.log('Detectado: movil');
            return botResponses['movil'];
        }
        
        // Ayuda
        if (msg.includes('ayuda') || msg.includes('help') || msg.includes('auxilio')) {
            console.log('Detectado: ayuda');
            return botResponses.ayuda;
        }
        
        // Consejos
        if (msg.includes('consejos') || msg.includes('tips') || msg.includes('recomendaciones')) {
            console.log('Detectado: consejos');
            return botResponses['consejos estudio'];
        }
        
        // Programaci√≥n
        if (msg.includes('programacion') || msg.includes('codigo') || msg.includes('python') || msg.includes('javascript')) {
            console.log('Detectado: programacion');
            return botResponses.programacion;
        }
        
        // Matem√°ticas
        if (msg.includes('matematicas') || msg.includes('mates') || msg.includes('calculo')) {
            console.log('Detectado: matematicas');
            return botResponses.matematicas;
        }
        
        // Biblioteca
        if (msg.includes('biblioteca') || msg.includes('recursos') || msg.includes('materiales')) {
            console.log('Detectado: biblioteca');
            return botResponses.biblioteca;
        }
        
        // Dashboard y preguntas espec√≠ficas de estudiantes
        if (msg.includes('dashboard') || msg.includes('progreso') || msg.includes('como gano puntos') || 
            msg.includes('que significa mi nivel') || msg.includes('donde veo logros') || 
            msg.includes('reto especial') || msg.includes('ranking') || msg.includes('chat profesor') ||
            msg.includes('cambio avatar') || msg.includes('editar perfil') || msg.includes('cierro sesion')) {
            console.log('Detectado: dashboard');
            return botResponses.dashboard;
        }
        
        // Preguntas espec√≠ficas de puntos y niveles
        if (msg.includes('ganar puntos') || msg.includes('como subo nivel') || msg.includes('puntos extra')) {
            console.log('Detectado: dashboard (puntos)');
            return botResponses.dashboard;
        }
        
        // Logros y ranking
        if (msg.includes('logros') || msg.includes('ranking') || msg.includes('lider') || msg.includes('posicion')) {
            console.log('Detectado: dashboard (logros)');
            return botResponses.dashboard;
        }
        
        // Juegos
        if (msg.includes('juegos') || msg.includes('retos') || msg.includes('quiz')) {
            console.log('Detectado: juegos');
            return botResponses.juegos;
        }
        
        // Profesores y panel docente
        if (msg.includes('profesor') || msg.includes('admin') || msg.includes('docente') ||
            msg.includes('panel profesor') || msg.includes('agregar quiz') || msg.includes('crear quiz') ||
            msg.includes('resultados alumnos') || msg.includes('modificar quiz') || msg.includes('area profesor') ||
            msg.includes('comunicarme alumnos') || msg.includes('gestionar') || msg.includes('ensenar')) {
            console.log('Detectado: profesores');
            return botResponses.profesores;
        }
        
        // Espec√≠fico para gesti√≥n de quizzes
        if (msg.includes('quiz') && (msg.includes('crear') || msg.includes('editar') || msg.includes('modificar'))) {
            console.log('Detectado: profesores (quiz)');
            return botResponses.profesores;
        }
        
        // Registro
        if (msg.includes('registro') || msg.includes('registrarme') || msg.includes('crear cuenta')) {
            console.log('Detectado: registro');
            return botResponses.registro;
        }
        
        // Login
        if (msg.includes('login') || msg.includes('iniciar sesion') || msg.includes('entrar')) {
            console.log('Detectado: login');
            return botResponses.login;
        }
        
        // Tecnolog√≠a
        if (msg.includes('tecnologia') || msg.includes('inteligencia artificial') || msg.includes('blockchain')) {
            console.log('Detectado: tecnologia');
            return botResponses.tecnologia;
        }
        
        // Agradecimientos
        if (msg.includes('gracias') || msg.includes('excelente') || msg.includes('perfecto')) {
            return 'üòä ¬°De nada! Es un placer ayudarte.\n\nComo asistente de MenTora, mi objetivo es hacer tu experiencia de aprendizaje lo m√°s fluida posible. \n\n¬øHay algo m√°s en lo que pueda asistirte? Puedo ayudarte con:\n‚Ä¢ üîç Encontrar recursos espec√≠ficos\n‚Ä¢ üìà Optimizar tu progreso\n‚Ä¢ üéØ Estrategias de estudio\n‚Ä¢ üéÆ Recomendaciones de retos\n\n¬°Sigue explorando y aprendiendo!';
        }
        
        // Despedidas
        if (msg.includes('adios') || msg.includes('bye') || msg.includes('hasta luego')) {
            return 'üëã ¬°Hasta luego! Fue un placer ayudarte.\n\nüéØ **Recuerda:**\n‚Ä¢ Sigue practicando con los retos diarios\n‚Ä¢ Explora la biblioteca para m√°s conocimiento\n‚Ä¢ Compite en los rankings para subir de nivel\n\n¬°Nos vemos pronto en MenTora! üöÄ\n\n*Tip: Siempre puedes volver a chatear conmigo cuando necesites ayuda.*';
        }
        
        // Problemas t√©cnicos
        if (msg.includes('problema') || msg.includes('error') || msg.includes('no funciona')) {
            return 'üîß **Soporte T√©cnico de MenTora**\n\nüòî Lamento escuchar que tienes problemas. Aqu√≠ tienes algunas soluciones:\n\n**üîÑ Soluciones R√°pidas:**\n‚Ä¢ Refrescar la p√°gina (F5 o Ctrl+R)\n‚Ä¢ Limpiar cach√© del navegador\n‚Ä¢ Verificar tu conexi√≥n a internet\n‚Ä¢ Intentar en modo inc√≥gnito\n\n**üì± Si persiste el problema:**\n‚Ä¢ Intenta desde otro navegador\n‚Ä¢ Verifica que JavaScript est√© habilitado\n‚Ä¢ Desactiva extensiones que puedan interferir\n\n**üìû Contacto Directo:**\nSi el problema contin√∫a, contacta a nuestro equipo t√©cnico con:\n‚Ä¢ Descripci√≥n detallada del problema\n‚Ä¢ Navegador y versi√≥n que usas\n‚Ä¢ Pasos que realizaste antes del error\n\n¬°Estamos aqu√≠ para ayudarte!';
        }
        
        console.log('‚ùì Usando respuesta default para:', msg);
        // Respuesta por defecto actualizada
        const defaultResponse = 'ü§ñ **¬°Hola! Soy MenToraBot, tu asistente personal en MenTora**\n\n**üìã Preguntas sobre la plataforma:**\n‚Ä¢ "¬øQu√© es MenTora?" - Conoce nuestra plataforma educativa\n‚Ä¢ "¬øC√≥mo funciona?" - Gamificaci√≥n y din√°micas de aprendizaje\n‚Ä¢ "¬øEs gratis?" - Informaci√≥n sobre acceso gratuito\n‚Ä¢ "¬øFunciona en m√≥vil?" - Compatibilidad con dispositivos\n‚Ä¢ "¬øC√≥mo me registro?" - Proceso paso a paso\n\n**üéÆ Para estudiantes:**\n‚Ä¢ "¬øC√≥mo gano puntos?" - Sistema de puntuaci√≥n\n‚Ä¢ "¬øQu√© significa mi nivel?" - Progreso y niveles\n‚Ä¢ "¬øD√≥nde veo mis logros?" - Insignias y recompensas\n‚Ä¢ "Reto especial del d√≠a" - Actividades diarias\n‚Ä¢ "Ranking de l√≠deres" - Competencia sana\n‚Ä¢ "Cambiar avatar" - Personalizaci√≥n de perfil\n\n**üë®‚Äçüè´ Para profesores:**\n‚Ä¢ "Panel de profesor" - Herramientas docentes\n‚Ä¢ "Crear quiz" - Gesti√≥n de evaluaciones\n‚Ä¢ "Resultados de alumnos" - Seguimiento acad√©mico\n‚Ä¢ "√Årea del profesor" - Organizaci√≥n por materias\n\n**üìö Contenido educativo:**\n‚Ä¢ **Programaci√≥n** - Python, JavaScript, algoritmos\n‚Ä¢ **Matem√°ticas** - C√°lculo, √°lgebra, estad√≠stica\n‚Ä¢ **Biblioteca** - Recursos y materiales\n‚Ä¢ **Juegos** - Retos interactivos\n\n**üí° Tambi√©n puedo ayudarte con:**\n‚Ä¢ Consejos de estudio\n‚Ä¢ Soporte t√©cnico\n‚Ä¢ Chat en vivo\n‚Ä¢ Inicio de sesi√≥n\n\n**¬°Escribe cualquier tema y te dar√© informaci√≥n detallada! üöÄ**';
        console.log('üì§ Retornando respuesta default');
        return defaultResponse;
    }

    // Funci√≥n para agregar mensaje del usuario
    function addUserMessage(message) {
        const messages = document.getElementById('chatbot-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'user-message';
        messageDiv.innerHTML = `
            <div class="user-avatar">üë§</div>
            <div class="message-bubble user-bubble">${escapeHtml(message)}</div>
        `;
        messages.appendChild(messageDiv);
        scrollToBottom();
    }

    // Funci√≥n para agregar mensaje del bot
    function addBotMessage(message) {
        const messages = document.getElementById('chatbot-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = 'bot-message';
        messageDiv.innerHTML = `
            <div class="bot-avatar">ü§ñ</div>
            <div class="message-bubble bot-bubble">${formatBotMessage(message)}</div>
        `;
        messages.appendChild(messageDiv);
        scrollToBottom();
        
        // Mostrar notificaci√≥n si el chat est√° cerrado
        if (!chatbotOpen) {
            document.getElementById('notificationDot').style.display = 'block';
        }
    }

    // Funci√≥n para mostrar indicador de escritura
    function showTypingIndicator() {
        isTyping = true;
        document.getElementById('typing-indicator').style.display = 'flex';
        scrollToBottom();
    }

    // Funci√≥n para ocultar indicador de escritura
    function hideTypingIndicator() {
        isTyping = false;
        document.getElementById('typing-indicator').style.display = 'none';
    }

    // Funci√≥n para hacer scroll al final
    function scrollToBottom() {
        const messages = document.getElementById('chatbot-messages');
        setTimeout(() => {
            messages.scrollTop = messages.scrollHeight;
        }, 100);
    }

    // Funci√≥n para escapar HTML
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // Funci√≥n para formatear mensajes del bot
    function formatBotMessage(message) {
        console.log('üé® Formateando mensaje:', message.substring(0, 50) + '...');
        let formatted = escapeHtml(message);
        
        // Convertir markdown b√°sico a HTML
        formatted = formatted
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // **texto** -> <strong>texto</strong>
            .replace(/\*(.*?)\*/g, '<em>$1</em>') // *texto* -> <em>texto</em>
            .replace(/\n‚Ä¢ /g, '<br>‚Ä¢ ') // Bullets con salto de l√≠nea
            .replace(/\n\n/g, '<br><br>') // Doble salto de l√≠nea
            .replace(/\n/g, '<br>'); // Salto de l√≠nea simple
        
        console.log('‚ú® Mensaje formateado completado');
        return formatted;
    }

    // Funci√≥n para alternar picker de emojis (placeholder)
    function toggleEmojiPicker() {
        const emojis = ['üòä', 'üòÇ', 'ü§î', 'üëç', '‚ù§Ô∏è', 'üéâ', 'üí°', 'üî•', 'üíØ', 'üëè'];
        const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
        const input = document.getElementById('chatbot-input');
        input.value += randomEmoji;
        input.focus();
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-focus en el input cuando se abre el chat
        const input = document.getElementById('chatbot-input');
        
        // Detectar Enter para enviar
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendChatbotMessage(e);
            }
        });
        
        // Prevenir env√≠o de formulario vac√≠o
        input.addEventListener('input', function() {
            const sendBtn = document.querySelector('.send-btn');
            sendBtn.disabled = !this.value.trim();
        });
        
        // Cerrar chat con Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && chatbotOpen) {
                toggleChatbot();
            }
        });
        
        // Mostrar notificaci√≥n inicial despu√©s de unos segundos
        setTimeout(() => {
            if (!chatbotOpen) {
                document.getElementById('notificationDot').style.display = 'block';
            }
        }, 5000);
    });
    </script>
</body>
</html>